Solution to the producer-consumer problem using semaphores and pthreads